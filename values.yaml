# Default values for mapserver.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

nfs:
  raster:
    pvname: ogs-cloud-raster-nfs
    server: 10.236.1.3
    path: /raster
    storage: 10Gi
  config:
    pvname: ogs-cloud-datadir-nfs
    server: 10.236.1.3
    path: /config
    storage: 10Gi
  cache:
    pvname: ogs-cloud-gwc-cache-nfs
    server: 10.236.1.3
    path: /cache
    storage: 10Gi

geoservercloud:
  global:
    profile: datadir
    image:
      pullPolicy: Always
  #     registry: samere.ch
  postgresql:
    enabled: false
    persistence:
      enabled: false
    tls:
      enabled: true
      autoGenerated: true
    postgresqlDatabase: "ogscloud"
    postgresqlUsername: "ogscloudconfig"
    postgresqlPassword: "password"
    postgresqlHostName: "172.17.0.1"
  geoserver:
    envVariables:
      geoserverDbUsername:
        name: "GEOSERVER_DB_USERNAME"
        value: ""
        secretName: "ogscloud-database"
        secretKey: "username"
      geoserverDbPassword:
        name: "GEOSERVER_DB_PASSWORD"
        value: ""
        secretName: "ogscloud-database"
        secretKey: "password"
      geoserverDbHostName:
        name: "GEOSERVER_DB_HOST"
        value: ""
        secretName: "ogscloud-database"
        secretKey: "hostname"
      geoserverDbPort:
        name: "GEOSERVER_DB_PORT"
        value: ""
        secretName: "ogscloud-database"
        secretKey: "port"
    jdbc:
      external: true
      configVariables:
        postgresqlDatabase:
          name: "JDBCCONFIG_DATABASE"
          value: "ogscloud"
        postgresqlUsername:
          name: "JDBCCONFIG_USERNAME"
          value: ""
          secretName: "ogscloud-database"
          secretKey: "username"
        postgresqlPassword:
          name: "JDBCCONFIG_PASSWORD"
          value: ""
          secretName: "ogscloud-database"
          secretKey: "password"
        postgresqlHostName:
          name: "JDBCCONFIG_HOST"
          value: ""
          secretName: "ogscloud-database"
          secretKey: "hostname"
        postgresqlSchema:
          name: "JDBCCONFIG_SCHEMA"
          value: "testing"
        # postgresqlJdbcUrl:
        #   name: "JDBCCONFIG_URL"
        #   value: "jdbc:postgresql://172.17.0.1:5432/ogscloud?currentSchema=config"
        servicePort:
          name: "JDBCCONFIG_PORT"
          value: ""
          secretName: "ogscloud-database"
          secretKey: "port"
    volumeMounts:
      - mountPath: "/var/geoserver/nfsrasters"
        mountName: "ogs-cloud-raster-nfs-storage"
        pvcName: "ogs-cloud-raster-nfs-claim"
      - mountPath: "/opt/app/data_directory"
        mountName: "ogs-cloud-datadir-nfs"
        pvcName: "ogs-cloud-datadir-nfs-claim"
      - mountPath: "/mnt/cache"
        mountName: "ogs-cloud-gwc-cache-nfs"
        pvcName: "ogs-cloud-gwc-cache-nfs-claim"

    ingress:
      deploy: false
      baseUrl: "/ogs-cloud/"
    gateway:
      image:
        tag: "1.0-SNAPSHOT"
    config:
      image:
        tag: "1.0-SNAPSHOT"
    discovery:
      image:
        tag: "1.0-SNAPSHOT"
    services:
      rest:
        env:
          - name: GEOWEBCACHE_CACHE_DIR
            value: "/mnt/cache"
        image:
          tag: "1.0-SNAPSHOT"
      wms:
        image:
          tag: "1.0-SNAPSHOT"
        replicaCount: 2
      wcs:
        image:
          tag: "1.0-SNAPSHOT"
      wfs:
        image:
          tag: "1.0-SNAPSHOT"
      webui:
        env:
          - name: GEOWEBCACHE_CACHE_DIR
            value: "/mnt/cache"
        image:
          tag: "1.0-SNAPSHOT"
      gwc:
        env:
          - name: GEOWEBCACHE_CACHE_DIR
            value: "/mnt/cache"
        image:
          tag: "1.0-SNAPSHOT"
